{% extends 'portal/portal_base_sidebar.html'%}

{% load static %}

{% load group_tags %}

{% block title %} Portal | {{ project.title }} {% endblock title %}

{% block css %}

  {{ block.super }}

  <link rel="stylesheet" href="{% static 'account/style.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'project/style.css' %}" type="text/css">
{% endblock css %}

{% block portal_content %}
  <div class="portal-wrapper event-detail project">
    <div class="detail-info-section">
      <div class="detail-card">
        <div class="detail-img">
          <div class="img-wrapper">
            <img src="{{ project.image.url }}">
          </div>
        </div>
        <div class="portal-title">
          <h1>{{ project.title }}</h1>
        </div>
      </div>
      <div class="detail-info">
        <div class="column">
          <div class="detail-info-group">
            <div class="detail-info-item-1">
              <p>Created date :</p>
            </div>
            <div class="detail-info-item-2">
              <p>{{  project.date_created }}</p>
            </div>
          </div>
          <div class="detail-info-group">
            <div class="detail-info-item-1">
              <p>Closing date :</p>
            </div>
            <div class="detail-info-item-2">
              <p>{{  project.date_ended }}</p>
            </div>
          </div>
        </div>
        <div class="column">
          <div class="">
            <div class="detail-info-item-1">
              <p>Description :</p>
            </div>
            <div class="detail-info-item-2">
              <p>{{  project.description|safe|linebreaks  }}</p>
            </div>
          </div>
          <div class="">
            <div class="detail-info-item-1">
              <p>Content :</p>
            </div>
            <div class="detail-info-item-2">
              <p>{{  project.content|safe|linebreaks  }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="detail-bar">
    <div class="detail-bar-col-1">
      <a href="{% url 'project:project-list' %}">
        <p class="detail-bar-btn btn-black">Back</p>
      </a>
    </div>
    <div class="detail-bar-col-2">
      <a href="{% url 'page:project-detail' project.slug %}">
        <p class="detail-bar-btn btn-black">View on site</p>
      </a>

      {% if user|has_group:"Administrator" or user|has_group:"Project manager"%}

        {% if not project.date_ended %}
          <a href="{% url 'project:project-close' project.slug %}">
            <p class="detail-bar-btn btn-black">Close</p>
          </a>
        {% else %}
          <a href="{% url 'project:project-close' project.slug %}">
            <p class="detail-bar-btn btn-black">Open</p>
          </a>
        {% endif %}

        <a href="{% url 'project:project-update' project.slug %}">
          <p class="detail-bar-btn btn-black">Edit</p>
        </a>
      {% endif %}

      {% if user|has_group:"Administrator" %}
      <a href="{% url 'project:project-delete' project.slug %}">
        <p class="detail-bar-btn btn-red btn-last">Delete</p>
      </a>
      {% endif %}

    </div>
  </div>
{% endblock portal_content %}